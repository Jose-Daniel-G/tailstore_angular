import{c as _}from"./chunk-EV2IR64B.js";import{a as F}from"./chunk-BGUFIM6U.js";import"./chunk-NNP535OP.js";import{a as w,b as d,c as C,d as y,f as S,h as x,i as L,k as I,m as T}from"./chunk-5A73AW67.js";import{$a as l,Ja as m,Jb as b,Lb as h,Ma as s,Qa as n,Ra as t,Sa as p,Ua as f,Va as g,Y as c,ab as v,gb as E,ya as a,za as u}from"./chunk-PSGGF63T.js";function D(o,i){o&1&&(n(0,"div"),l(1,"El Email es requerido."),t())}function R(o,i){o&1&&(n(0,"div"),l(1,"El Email debe tener un formato v\xE1lido."),t())}function q(o,i){if(o&1&&(n(0,"div",9),m(1,D,2,0,"div",10)(2,R,2,0,"div",10),t()),o&2){let e=g();a(),s("ngIf",e.email.errors==null?null:e.email.errors.required),a(),s("ngIf",e.email.errors==null?null:e.email.errors.email)}}function B(o,i){o&1&&(n(0,"div"),l(1,"El Password es requerido."),t())}function G(o,i){o&1&&(n(0,"div"),l(1,"La contrase\xF1a debe tener al menos 8 caracteres."),t())}function A(o,i){if(o&1&&(n(0,"div",9),m(1,B,2,0,"div",10)(2,G,2,0,"div",10),t()),o&2){let e=g();a(),s("ngIf",e.password.errors==null?null:e.password.errors.required),a(),s("ngIf",e.password.errors==null?null:e.password.errors.minlength)}}var N=class o{constructor(i,e,r){this.formBuilder=i;this.router=e;this.LoginService=r;this.loginForm=this.formBuilder.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(3)]]})}loginError="";loginForm;ngOnInit(){}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}debugFormErrors(){if(console.group("DEBUG: Errores del Formulario de Login"),!this.loginForm){console.error("El formulario (this.loginForm) es null o undefined."),console.groupEnd();return}console.warn(`Estado general: ${this.loginForm.status}. Inv\xE1lido: ${this.loginForm.invalid}`),Object.keys(this.loginForm.controls).forEach(i=>{let e=this.loginForm.get(i);e&&(console.log(`Campo: ${i}`),console.log(`  > Estado: ${e.status} (V\xE1lido: ${e.valid})`),console.log(`  > Tocado (Touched): ${e.touched}`),e.errors&&console.error("  > ERRORES DETECTADOS:",e.errors))}),console.groupEnd()}login(){this.loginForm.valid?this.LoginService.login(this.loginForm.value).subscribe({next:i=>{console.log(i),this.router.navigateByUrl("/inicio/dashboard"),this.loginForm.reset()},error:i=>{console.error(i),this.loginError=i.message}}):(this.loginForm.markAllAsTouched(),this.debugFormErrors(),this.loginError="Por favor, complete los campos correctamente.",console.error('El formulario no es v\xE1lido. La informaci\xF3n detallada de los errores est\xE1 en el grupo "DEBUG".'))}static \u0275fac=function(e){return new(e||o)(u(I),u(_),u(F))};static \u0275cmp=c({type:o,selectors:[["app-login"]],standalone:!0,features:[E],decls:15,vars:4,consts:[[1,"max-w-md","mx-auto","p-6","bg-white","shadow-md","rounded",3,"ngSubmit","formGroup"],[1,"text-red-600","mb-4"],[1,"mb-4"],["for","email",1,"block","text-gray-700","font-semibold","mb-2"],["formControlName","email","type","email","id","email","aria-describedby","emailHelp",1,"w-full","px-3","py-2","border","border-gray-300","rounded","focus:outline-none","focus:ring","focus:ring-indigo-100"],["class","text-red-600 mt-2 text-sm",4,"ngIf"],["for","password",1,"block","text-gray-700","font-semibold","mb-2"],["formControlName","password","type","password","id","password",1,"w-full","px-3","py-2","border","border-gray-300","rounded","focus:outline-none","focus:ring","focus:ring-indigo-100"],["type","submit",1,"w-full","bg-indigo-600","text-white","py-2","rounded","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-600","focus:ring-opacity-50"],[1,"text-red-600","mt-2","text-sm"],[4,"ngIf"]],template:function(e,r){e&1&&(n(0,"form",0),f("ngSubmit",function(){return r.login()}),n(1,"p",1),l(2),t(),n(3,"div",2)(4,"label",3),l(5,"Email"),t(),p(6,"input",4),m(7,q,3,2,"div",5),t(),n(8,"div",2)(9,"label",6),l(10,"Password"),t(),p(11,"input",7),m(12,A,3,2,"div",5),t(),n(13,"button",8),l(14," Iniciar Sesi\xF3n "),t()()),e&2&&(s("formGroup",r.loginForm),a(2),v(r.loginError),a(5),s("ngIf",(r.email==null?null:r.email.invalid)&&((r.email==null?null:r.email.touched)||(r.email==null?null:r.email.dirty))),a(5),s("ngIf",(r.password==null?null:r.password.invalid)&&((r.password==null?null:r.password.touched)||(r.password==null?null:r.password.dirty))))},dependencies:[T,S,w,C,y,x,L,h,b],encapsulation:2})};export{N as LoginComponent};
